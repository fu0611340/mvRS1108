<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Coffee Form to REST</title>
<script src="js/jquery3.6.0.js"></script>
</head>
<body>
	咖啡名稱: <input type="text" id="coffee" value="Extra Espresso" /><br>
	售價: <input type="text" id="sale" value="200" /><br>
	數量: <input type="text" id="total" value="10" /><br>
	供應商: <input type="text" id="supplier" value="150" /><br>
	價錢: <input type="text" id="price" value="300" /><br>
	<button id="add">ADD</button>
	<button id="update">UPDATE</button>
	<button id="remove">REMOVE</button>
	<div id="dis"></div>
	<button id="query">QUERY</button>
	<table border="1" style="width: 70%">
		<thead>
			<tr>
				<th>Coffee Name</th>
				<th>Supplier ID</th>
				<th>Price</th>
				<th>Sales</th>
				<th>Total</th>
			</tr>
		</thead>
		<tbody id="tbody">
		</tbody>
	</table>
	<script>
		function query() {
			$.ajax({
				url: 'api/coffee/get', 
				type: 'get', 
				contentType: 'application/json', 
				cache: false, 
				datatype: 'text/html', 
				success: function(data) {
					$("#tbody").empty();
					$.each(data, function(index, item) {
						console.log(data);
						console.log(index);
						console.log(item);
						var eachrow = "<tr>"
									+ "<td>" + item.cofName + "</td>"
									+ "<td>" + item.supId + "</td>"
									+ "<td>" + item.price + "</td>"
									+ "<td>" + item.sales + "</td>"
									+ "<td>" + item.total + "</td>"
									+ "</tr>";
						$("#tbody").append(eachrow);
					});
				}, 
				error: function(data) {
					$("#dis").html('無法送出');
				}
			});
		}
		function remove() {
			var obj = {};
			obj.cofName = $("#coffee").val();
			obj.supId = parseInt($("#supplier").val());
			obj.price = parseFloat($("#price").val());
			obj.sales = parseInt($("#sale").val());
			obj.total = parseInt($("#total").val());
			$.ajax({
				url: 'api/coffee/delete', 
				type: 'post', 
				data: JSON.stringify(obj), 
				contentType: 'application/json', 
				cache: false, 
				datatype: 'text/html', 
				success: function(data) {
					$("#dis").html(data);
				}, 
				error: function(data) {
					$("#dis").html('無法送出');
				}
			});
		}
		function update() {
			var obj = {};
			obj.cofName = $("#coffee").val();
			obj.supId = parseInt($("#supplier").val());
			obj.price = parseFloat($("#price").val());
			obj.sales = parseInt($("#sale").val());
			obj.total = parseInt($("#total").val());
			$.ajax({
				url: 'api/coffee/update', 
				type: 'post', 
				data: JSON.stringify(obj), 
				contentType: 'application/json', 
				cache: false, 
				datatype: 'text/html', 
				success: function(data) {
					$("#dis").html(data);
				}, 
				error: function(data) {
					$("#dis").html('無法送出');
				}
			});
		}
		function send() {
			var obj = {};
			obj.cofName = $("#coffee").val();
			obj.supId = parseInt($("#supplier").val());
			obj.price = parseFloat($("#price").val());
			obj.sales = parseInt($("#sale").val());
			obj.total = parseInt($("#total").val());
			$.ajax({
				url: 'api/coffee/post', 
				type: 'post', 
				data: JSON.stringify(obj), 
				contentType: 'application/json', 
				cache: false, 
				datatype: 'text/html', 
				success: function(data) {
					$("#dis").html(data);
				}, 
				error: function(data) {
					$("#dis").html('無法送出');
				}
			});
		}
		function start() {
			$("#add").click(send);
			$("#update").click(update);
			$("#remove").click(remove);
			$("#query").click(query);
		}
		$(document).ready(start);
	</script>
</body>
</html>